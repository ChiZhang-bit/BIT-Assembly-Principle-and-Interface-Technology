INCLUDE Irvine32.inc
includelib Irvine32.lib

.data
ROWS = 93										
COLUMNS = 163									

ghosta byte " ### ",0
ghostb byte "#0#0#",0
ghostc byte "# # #",0

dirchoose db 4 dup(0)
dircount  db 0

framecount dw 1

pacmanEatShape byte "#   #",0
			   byte	"#####",0
			   byte	" ### ",0
			   
			   byte	" ####",0
			   byte "###  ",0
			   byte " ####",0
			   
			   byte " ### ",0
			   byte	"#####",0
			   byte	"#   #",0
					
			   byte	"#### ",0
			   byte	"  ###",0
			   byte	"#### ",0

pacmanShutShape byte " ### ",0
				byte "#####",0
				byte " ### ",0

bufftime SBYTE 0
pausetime SBYTE 0

myMessage BYTE "                PAC-MAN             ",0
createdBy BYTE "                                CREATED BY: Wei Huicong, Zhang Chi, Cao Zheyu, Wang Junzhe", 0ah, 0


pac      byte "	        ##########                #                   ######                  ##             ##            #            ###          ####",0
		 byte "       ##############             ###                ######  ###               ###           ###           ###           ####         ####",0
		 byte "       ####        ####          #####             ##############              ####         ####          #####          #####        ####",0
		 byte "       ####        ####         ### ###          ############                  #####       #####         ### ###         ######       ####",0
		 byte "       ####        ####        ###   ###        #########                      ######     ######        ###   ###        #######      ####",0
		 byte "       ####        ####       ###     ###       #########           #########  #################       ###     ###       ########     ####",0
		 byte "       ##############        ###       ###       ############                  #################      ###       ###      #########    ####",0
		 byte "       #### #######         ###############       ################             #################     ###############     #################",0
		 byte "       ####                #################        #############              #################    #################    #################",0
		 byte "       ####               ###################          ######                  #################   ###################   #################",0
		 byte "                                                                                                                                          ",0
		 byte "                                                                                                                                          ",0
		 byte "                                                                                                                                          ",0
		 byte "                                                                           ########                                ########               ",0
		 byte "                                                                       ################                        ################           ",0
		 byte "                                                                     ####################                    ####################         ",0
		 byte "                                                                   ######0000########0000##                ######0000########0000##       ",0
		 byte "                                                                   ####00000000####00000000                ####00000000####00000000       ",0
		 byte "                                                                   ####00001111####00001111                ####00001111####00001111       ",0
		 byte "                                                                 ######00001111####00001111##            ######00001111####00001111##     ",0
		 byte "                                                                 ######00000000####00000000##            ######00000000####00000000##     ",0
		 byte "                                                                 ########0000########0000####            ########0000########0000####     ",0
		 byte "                                                                 ############################            ############################     ",0
		 byte "                       ##########                                ############################            ############################     ",0
		 byte "                   ##################                            ############################            ############################     ",0
		 byte "                 ######################                          ############################            ############################     ",0
		 byte "                 ######################                          ############################            ############################     ",0
		 byte "               ####################                              ########  ########  ########            ########  ########  ########     ",0
		 byte "               ##############                                    ####      ####      ####                ####      ####      ####       ",0
		 byte "               ########                                                                                                                   ",0
		 byte "               ##############                                                                                                             ",0
		 byte "               ####################                                        ########                                ########               ",0
		 byte "                 ######################                                ################                        ################           ",0
		 byte "                 ######################                              ####################                    ####################         ",0
		 byte "                   ##################                              ######0000########0000##                ######0000########0000##       ",0
		 byte "                       ##########                                  ####00000000####00000000                ####00000000####00000000       ",0
		 byte "                                                                   ####00001111####00001111                ####00001111####00001111       ",0
		 byte "                                                                 ######00001111####00001111##            ######00001111####00001111##     ",0
		 byte "                                                                 ######00000000####00000000##            ######00000000####00000000##     ",0
		 byte "                                                                 ########0000########0000####            ########0000########0000####     ",0
		 byte "                                                                 ############################            ############################     ",0
		 byte "                                                                 ############################            ############################     ",0
		 byte "                                                                 ############################            ############################     ",0
		 byte "                                                                 ############################            ############################     ",0
		 byte "                                                                 ############################            ############################     ",0
		 byte "                                                                 ########  ########  ########            ########  ########  ########     ",0
		 byte "                                                                   ####      ####      ####                ####      ####      ####       ",0
		 byte "                                                                                                                                          ",0
		 byte "                                                                                                                                          ",0
		 byte "       ######                                                                                                                             ",0
		 byte "       ##    ##  ##  ##    ####      ######    ######      ######  ######    ##    ##    ##    ##    ####    ##    ##                     ",0
		 byte "       ##    ##  ####    ##  ####  ####      ####        ##    ##  ##    ##  ##    ##    ##  ##    ##  ####  ##    ##                     ",0
		 byte "       ######    ##      ####          ####      ####    ##    ##  ##    ##  ##    ##    ######    ####      ##    ##   ####   ####   ####",0
		 byte "       ##        ##        ####    ######    ######        ######  ##    ##    ######    ##    ##    ####      ######   ####   ####   ####",0
		 byte "                                                                                   ##                              ##                     ",0
		 byte "                                                                             ######                          ######                       ",0



pacChar dd ?
pacx SBYTE 78
pacy SBYTE 71
pacdir db 2										;1 = north, 2 = east, 3 = south, 4 = west
ghos1x SBYTE 72
ghos1y SBYTE 36
ghos1dir db 1									
ghos2x SBYTE 78
ghos2y SBYTE 36
ghos2dir db 1									
ghos2targx db 0
ghos2targy db 0
ghos3x SBYTE 84
ghos3y SBYTE 36
ghos3dir db 1									
ghos3targx db 0
ghos3targy db 0
ghos4x SBYTE 90
ghos4y SBYTE 36
ghos4dir db 1									
ghos4targx db 0
ghos4targy db 0
northlegal db 0									; 0 = false, 1 = true
eastlegal db 0
southlegal db 0
westlegal db 0
northdist db 0									
eastdist db 0									
southdist db 0									
westdist db 0									
totalScore dd 0									
totalLives SBYTE 3								;pacman starts with 3 lives
distance	SBYTE ?

outputScore db "SCORE: ",0
outputLives db "UP",0
thatsAllSheWrote db "GAME OVER!",0
chickenDinner db "YOU WIN!",0
result db "Your total score is: ",0



boardArray db "###################################################################################################################################################################",0
db "###################################################################################################################################################################",0
db "###################################################################################################################################################################",0
db "###################################################################################################################################################################",0
db "######.     .     .     .     .     .     .     .     .     .     .     .#################X     .     .     .     .     .     .     .     .     .     .     .######",0
db "###### ############################# ################################### ################# ################################### ############################# ######",0
db "###### ############################# ################################### ################# ################################### ############################# ######",0
db "######.#############################.###################################.#################.###################################.#############################.######",0  
db "###### ############################# ################################### ################# ################################### ############################# ######",0
db "###### ############################# ################################### ################# ################################### ############################# ######",0
db "######O#############################.###################################.#################.###################################.#############################O######",0  
db "###### ############################# ################################### ################# ################################### ############################# ######",0
db "###### ############################# ################################### ################# ################################### ############################# ######",0
db "######.#############################.###################################.#################.###################################.#############################.######",0  
db "###### ############################# ################################### ################# ################################### ############################# ######",0
db "###### ############################# ################################### ################# ################################### ############################# ######",0
db "######.     .     .     .     .     .     .     .     .     .     .     .     .     .     .     .     .     .     .     .     .     .     .     .     .     .######",0  
db "###### ############################# ################# ##################################################### ################# ############################# ######",0
db "###### ############################# ################# ##################################################### ################# ############################# ######",0
db "######.#############################.#################.#####################################################.#################.#############################.######",0  
db "###### ############################# ################# ##################################################### ################# ############################# ######",0
db "###### ############################# ################# ##################################################### ################# ############################# ######",0
db "######.#############################.#################.#####################################################.#################.#############################.######",0  
db "###### ############################# ################# ##################################################### ################# ############################# ######",0
db "###### ############################# ################# ##################################################### ################# ############################# ######",0
db "######.     .     .     .     .     .#################.     .     .     .#################.     .     .     .#################.     .     .     .     .     .######",0  
db "#################################### ################################### ################# ################################### ####################################",0  
db "#################################### ################################### ################# ################################### ####################################",0  
db "####################################.################################### ################# ###################################.####################################",0  
db "#################################### ################################### ################# ################################### ####################################",0  
db "#################################### ################################### ################# ################################### ####################################",0  
db "####################################.################################### ################# ###################################.####################################",0  
db "#################################### ################################### ################# ################################### ####################################",0  
db "#################################### ################################### ################# ################################### ####################################",0  
db "####################################.#################                                                       #################.####################################",0  
db "#################################### ################# ##################################################### ################# ####################################",0  
db "#################################### ################# ##################################################### ################# ####################################",0  
db "####################################.################# ##################################################### #################.####################################",0  
db "#################################### ################# ##################################################### ################# ####################################",0  
db "#################################### ################# ##################################################### ################# ####################################",0  
db "####################################.################# ##################################################### #################.####################################",0  
db "#################################### ################# ##################################################### ################# ####################################",0  
db "#################################### ################# ##################################################### ################# ####################################",0  
db "                                    .                  #######                                       #######                  T                                    ",0  
db "#################################### ################# ##################################################### ################# ####################################",0  
db "#################################### ################# ##################################################### ################# ####################################",0  
db "####################################.################# ##################################################### #################.####################################",0  
db "#################################### ################# ##################################################### ################# ####################################",0  
db "#################################### ################# ##################################################### ################# ####################################",0  
db "####################################.################# ##################################################### #################.####################################",0  
db "#################################### ################# ##################################################### ################# ####################################",0  
db "#################################### ################# ##################################################### ################# ####################################",0  
db "####################################.#################                                                       #################.####################################",0  
db "#################################### ################# ##################################################### ################# ####################################",0  
db "#################################### ################# ##################################################### ################# ####################################",0  
db "####################################.################# ##################################################### #################.####################################",0  
db "#################################### ################# ##################################################### ################# ####################################",0 
db "#################################### ################# ##################################################### ################# ####################################",0  
db "####################################.################# ##################################################### #################.####################################",0  
db "#################################### ################# ##################################################### ################# ####################################",0 
db "#################################### ################# ##################################################### ################# ####################################",0 
db "######.     .     .     .     .     .     .     .     .     .     .     .#################.     .     .     .     .     .     .     .     .     .     .     .######",0  
db "###### ############################# ################################### ################# ################################### ############################# ######",0 
db "###### ############################# ################################### ################# ################################### ############################# ######",0
db "######.#############################.###################################.#################.###################################.#############################.######",0  
db "###### ############################# ################################### ################# ################################### ############################# ######",0
db "###### ############################# ################################### ################# ################################### ############################# ######",0
db "######.#############################.###################################.#################.###################################.#############################.######",0  
db "###### ############################# ################################### ################# ################################### ############################# ######",0
db "###### ############################# ################################### ################# ################################### ############################# ######",0 
db "######O     .     .#################.     .     .     .     .     .     .                 .     .     .     .     .     .     .#################.     .     O######",0  
db "################## ################# ################# ##################################################### ################# ################# ##################",0  
db "################## ################# ################# ##################################################### ################# ################# ##################",0  
db "##################.#################.#################.#####################################################.#################.#################.##################",0  
db "################## ################# ################# ##################################################### ################# ################# ##################",0  
db "################## ################# ################# ##################################################### ################# ################# ##################",0  
db "##################.#################.#################.#####################################################.#################.#################.##################",0  
db "################## ################# ################# ##################################################### ################# ################# ##################",0  
db "################## ################# ################# ##################################################### ################# ################# ##################",0  
db "######.     .     .     .     .     .#################.     .     .     .     .     .     .     .     .     .#################.     .     .     .     .     .######",0 
db "###### ################################################################# ################# ################################################################# ######",0 
db "###### ################################################################# ################# ################################################################# ######",0 
db "######.#################################################################.#################.#################################################################.######",0 
db "###### ################################################################# ################# ################################################################# ######",0 
db "###### ################################################################# ################# ################################################################# ######",0 
db "######.#################################################################.#################.#################################################################.######",0 
db "###### ################################################################# ################# ################################################################# ######",0 
db "###### ################################################################# ################# ################################################################# ######",0 
db "######X     .     .     .     .     .     .     .     .     .     .     T     .     .     .     .     .     .     .     .     .     .     .     .     .     .######",0 
db "###################################################################################################################################################################",0
db "###################################################################################################################################################################",0
db "###################################################################################################################################################################",0
db "###################################################################################################################################################################",0


; 93 * 164
row db "###################################################################################################################################################################",0
db "###################################################################################################################################################################",0
db "###################################################################################################################################################################",0
db "####                                                                       #############                                                                       ####",0
db "####  .     .     .     .     .     .     .     .     .     .     .     .  #############  X     .     .     .     .     .     .     .     .     .     .     .  ####",0
db "####                                                                       #############                                                                       ####",0
db "####     #########################     ###############################     #############     ###############################     #########################     ####",0  
db "####  .  #########################  .  ###############################  .  #############  .  ###############################  .  #########################  .  ####",0  
db "####     #########################     ###############################     #############     ###############################     #########################     ####",0  
db "####     #########################     ###############################     #############     ###############################     #########################     ####",0 
db "####  O  #########################  .  ###############################  .  #############  .  ###############################  .  #########################  O  ####",0 
db "####     #########################     ###############################     #############     ###############################     #########################     ####",0 
db "####     #########################     ###############################     #############     ###############################     #########################     ####",0  
db "####  .  #########################  .  ###############################  .  #############  .  ###############################  .  #########################  .  ####",0  
db "####     #########################     ###############################     #############     ###############################     #########################     ####",0  
db "####                                                                                                                                                           ####",0
db "####  .     .     .     .     .     .     .     .     .     .     .     .     .     .     .     .     .     .     .     .     .     .     .     .     .     .  ####",0  
db "####                                                                                                                                                           ####",0
db "####     #########################     #############     #################################################     #############     #########################     ####",0  
db "####  .  #########################  .  #############  .  #################################################  .  #############  .  #########################  .  ####",0  
db "####     #########################     #############     #################################################     #############     #########################     ####",0  
db "####     #########################     #############     #################################################     #############     #########################     ####",0  
db "####  .  #########################  .  #############  .  #################################################  .  #############  .  #########################  .  ####",0  
db "####     #########################     #############     #################################################     #############     #########################     ####",0  
db "####                                   #############                       #############                       #############                                   ####",0  
db "####  .     .     .     .     .     .  #############  .     .     .     .  #############  .     .     .     .  #############  .     .     .     .     .     .  ####",0  
db "####                                   #############                       #############                       #############                                   ####",0  
db "##################################     ###############################     #############     ###############################     ##################################",0  
db "##################################  .  ###############################     #############     ###############################  .  ##################################",0  
db "##################################     ###############################     #############     ###############################     ##################################",0  
db "##################################     ###############################     #############     ###############################     ##################################",0  
db "##################################  .  ###############################     #############     ###############################  .  ##################################",0  
db "##################################     ###############################     #############     ###############################     ##################################",0  
db "##################################     #############                                                           #############     ##################################",0  
db "##################################  .  #############                                                           #############  .  ##################################",0  
db "##################################     #############                                                           #############     ##################################",0  
db "##################################     #############     #################################################     #############     ##################################",0  
db "##################################  .  #############     #################################################     #############  .  ##################################",0  
db "##################################     #############     #################################################     #############     ##################################",0  
db "##################################     #############     #####                                       #####     #############     ##################################",0  
db "##################################  .  #############     #####                                       #####     #############  .  ##################################",0  
db "##################################     #############     #####                                       #####     #############     ##################################",0  
db "                                                         #####                                       #####                                                         ",0  
db "                                    .                    #####                                       #####                    T                                    ",0  
db "                                                         #####                                       #####                                                         ",0  
db "##################################     #############     #####                                       #####     #############     ##################################",0  
db "##################################  .  #############     #####                                       #####     #############  .  ##################################",0  
db "##################################     #############     #####                                       #####     #############     ##################################",0  
db "##################################     #############     #################################################     #############     ##################################",0  
db "##################################  .  #############     #################################################     #############  .  ##################################",0  
db "##################################     #############     #################################################     #############     ##################################",0  
db "##################################     #############                                                           #############     ##################################",0  
db "##################################  .  #############                                                           #############  .  ##################################",0  
db "##################################     #############                                                           #############     ##################################",0  
db "##################################     #############     #################################################     #############     ##################################",0 
db "##################################  .  #############     #################################################     #############  .  ##################################",0 
db "##################################     #############     #################################################     #############     ##################################",0 
db "##################################     #############     #################################################     #############     ##################################",0  
db "##################################  .  #############     #################################################     #############  .  ##################################",0  
db "##################################     #############     #################################################     #############     ##################################",0  
db "####                                                                       #############                                                                       ####",0  
db "####  .     .     .     .     .     .     .     .     .     .     .     .  #############  .     .     .     .     .     .     .     .     .     .     .     .  ####",0  
db "####                                                                       #############                                                                       ####",0  
db "####     #########################     ###############################     #############     ###############################     #########################     ####",0  
db "####  .  #########################  .  ###############################  .  #############  .  ###############################  .  #########################  .  ####",0  
db "####     #########################     ###############################     #############     ###############################     #########################     ####",0  
db "####     #########################     ###############################     #############     ###############################     #########################     ####",0
db "####  .  #########################  .  ###############################  .  #############  .  ###############################  .  #########################  .  ####",0
db "####     #########################     ###############################     #############     ###############################     #########################     ####",0
db "####                 #############                                                                                               #############                 ####",0  
db "####  O     .     .  #############  .     .     .     .     .     .     .                 .     .     .     .     .     .     .  #############  .     .     O  ####",0  
db "####                 #############                                                                                               #############                 ####",0  
db "################     #############     #############     #################################################     #############     #############     ################",0  
db "################  .  #############  .  #############  .  #################################################  .  #############  .  #############  .  ################",0  
db "################     #############     #############     #################################################     #############     #############     ################",0  
db "################     #############     #############     #################################################     #############     #############     ################",0  
db "################  .  #############  .  #############  .  #################################################  .  #############  .  #############  .  ################",0  
db "################     #############     #############     #################################################     #############     #############     ################",0  
db "####                                   #############                                                           #############                                   ####",0  
db "####  .     .     .     .     .     .  #############  .     .     .     .     .     .     .     .     .     .  #############  .     .     .     .     .     .  ####",0 
db "####                                   #############                                                           #############                                   ####",0  
db "####     #############################################################     #############     #############################################################     ####",0 
db "####  .  #############################################################  .  #############  .  #############################################################  .  ####",0 
db "####     #############################################################     #############     #############################################################     ####",0 
db "####     #############################################################     #############     #############################################################     ####",0 
db "####  .  #############################################################  .  #############  .  #############################################################  .  ####",0 
db "####     #############################################################     #############     #############################################################     ####",0 
db "####                                                                                                                                                           ####",0
db "####  X     .     .     .     .     .     .     .     .     .     .     T     .     .     .     .     .     .     .     .     .     .     .     .     .     .  ####",0 
db "####                                                                                                                                                           ####",0
db "###################################################################################################################################################################",0   
db "###################################################################################################################################################################",0   
db "###################################################################################################################################################################",0   
